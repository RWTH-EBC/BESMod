stages:    - model_check    - create_model_whitelist    .check_model_job:    stage: model_check    before_script:        - export PIP_CACHE_DIR="/opt/cache/pip"        - source activate myenv        - pip install natsort        - export PYTHONIOENCODING=utf-8        - git clone https://github.com/RWTH-EBC/MoCITempGen    script:        - xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py  --single-package $lib_package --library BESMod -DS 2022      artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7h    only:        - external_pull_requests    retry:        max: 2        when: runner_system_failure      except:        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_show_ref/            - $CI_COMMIT_MESSAGE  =~ /ci_create_model_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_html_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_example_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_simulate/            - $CI_COMMIT_MESSAGE  =~ /ci_check/            - $CI_COMMIT_MESSAGE  =~ /ci_regression_test/            - $CI_COMMIT_MESSAGE  =~ /ci_html/            - $CI_COMMIT_MESSAGE  =~ /ci_setting/            - $CI_COMMIT_MESSAGE  =~ /ci_style_check/            - $CI_COMMIT_MESSAGE  =~ /ci_trigger_ibpsa/            - $CI_COMMIT_MESSAGE  =~ /ci_merge_except/            - $CI_COMMIT_MESSAGE  =~ /ci_correct_html/            - $CI_COMMIT_MESSAGE  =~ /ci_build_structure/            - $CI_COMMIT_MESSAGE  =~ /ci_build_whitelist/        refs:            - main            Check_BESMod_Examples:    variables:        lib_package: Examples    extends: .check_model_jobCheck_BESMod_Systems:    variables:        lib_package: Systems    extends: .check_model_jobCheck_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .check_model_jobCheck_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .check_model_job.dev_check_model_job:    stage: model_check    before_script:        - export PIP_CACHE_DIR="/opt/cache/pip"        - source activate myenv        - pip install natsort        - export PYTHONIOENCODING=utf-8        - git clone https://github.com/RWTH-EBC/MoCITempGen    script:        - xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py  --single-package $lib_package --library BESMod -DS 2022      artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7h    only:        refs:            - main    retry:        max: 2        when: runner_system_failureDevelopment_Check_BESMod_Examples:    variables:        lib_package: Examples    extends: .dev_check_model_jobDevelopment_Check_BESMod_Systems:    variables:        lib_package: Systems    extends: .dev_check_model_jobDevelopment_Check_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .dev_check_model_jobDevelopment_Check_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .dev_check_model_job.check_changed_models_job:    stage: model_check    before_script:        - export PIP_CACHE_DIR="/opt/cache/pip"        - source activate myenv        - pip install natsort        - export PYTHONIOENCODING=utf-8        - git clone https://github.com/RWTH-EBC/MoCITempGen    script:        - python MoCITempGen/CITests/CI_Configuration/configuration.py --changed-model        - git diff --raw --diff-filter=AMT HEAD^1 >  dymola-ci-tests/Configfiles/ci_changed_model_list.txt        - xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py --single-package $lib_package --library BESMod -DS 2022 -CM    artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7h    except:        refs:            - external_pull_requests                        - main            - /^correct_HTML_.*$/        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_show_ref/            - $CI_COMMIT_MESSAGE  =~ /ci_create_model_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_html_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_example_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_simulate/            - $CI_COMMIT_MESSAGE  =~ /ci_check/            - $CI_COMMIT_MESSAGE  =~ /ci_regression_test/            - $CI_COMMIT_MESSAGE  =~ /ci_html/            - $CI_COMMIT_MESSAGE  =~ /ci_setting/            - $CI_COMMIT_MESSAGE  =~ /ci_style_check/            - $CI_COMMIT_MESSAGE  =~ /ci_trigger_ibpsa/            - $CI_COMMIT_MESSAGE  =~ /ci_merge_except/            - $CI_COMMIT_MESSAGE  =~ /ci_correct_html/            - $CI_COMMIT_MESSAGE  =~ /ci_build_structure/            - $CI_COMMIT_MESSAGE  =~ /ci_build_whitelist/    retry:        max: 2        when: runner_system_failureCheck_BESMod_Examples_changed_models:    variables:        lib_package: Examples    only:        changes:            - BESMod/Examples/**/*    extends: .check_changed_models_jobCheck_BESMod_Systems_changed_models:    variables:        lib_package: Systems    only:        changes:            - BESMod/Systems/**/*    extends: .check_changed_models_jobCheck_BESMod_Tutorial_changed_models:    variables:        lib_package: Tutorial    only:        changes:            - BESMod/Tutorial/**/*    extends: .check_changed_models_jobCheck_BESMod_Utilities_changed_models:    variables:        lib_package: Utilities    only:        changes:            - BESMod/Utilities/**/*    extends: .check_changed_models_job.CI_check_model_job:    stage: model_check    before_script:        - export PIP_CACHE_DIR="/opt/cache/pip"        - source activate myenv        - pip install natsort        - export PYTHONIOENCODING=utf-8        - git clone https://github.com/RWTH-EBC/MoCITempGen    script:        - xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py --single-package $lib_package --library BESMod -DS 2022      artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7h    only:        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_check/    except:        refs:            - external_pull_requests    retry:        max: 2        when: runner_system_failure                  CI_Check_BESMod_Examples:    variables:        lib_package: Examples    extends: .CI_check_model_jobCI_Check_BESMod_Systems:    variables:        lib_package: Systems    extends: .CI_check_model_jobCI_Check_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .CI_check_model_jobCI_Check_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .CI_check_model_jobwhitelist_job:    stage: create_model_whitelist    before_script:        - export PIP_CACHE_DIR="/opt/cache/pip"        - source activate myenv        - pip install natsort        - export PYTHONIOENCODING=utf-8         - 'which ssh-agent || ( apt-get update -y && apt-get install openssh-client -y )'        - eval $(ssh-agent -s)        - mkdir -p ~/.ssh        - ssh-keyscan github.com >> ~/.ssh/known_hosts        - ssh-agent -a /tmp/ssh_agent.sock > /dev/null        - echo "$GITHUB_PRIVATE_KEY" > ~/.ssh/id_rsa        - chmod 600 ~/.ssh/id_rsa        - git config --global user.name "$GITLAB_USER_NAME"        - git config --global user.email "$GITLAB_USER_EMAIL"    script:        - mkdir whitelist && cd whitelist        - git clone --single-branch --branch $CI_COMMIT_REF_NAME git@github.com:$Github_Repository.git        - cd $CI_PROJECT_NAME        - git clone https://github.com/RWTH-EBC/MoCITempGen        - xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py -DS 2022 --repo-dir BESMod   --library BESMod --wh-library BESMod --whitelist    after_script:        - cd whitelist && cd $CI_PROJECT_NAME        - if cat dymola-ci-tests/Configfiles/exit.sh | grep "FAIL"; then            message="CI message from ebc-aixlib-bot. Update file dymola-ci-tests\ci_whitelist\ci_check_whitelist.txt. Please pull the new files before push again." ;            git add dymola-ci-tests/ci_whitelist/ci_check_whitelist.txt ;            git commit -m "$message" ;            git push git@github.com:$Github_Repository.git ;            GREEN='\033[0;32m' ;            NC='\033[0m' ;            echo  -e "$GREEN New html whitelist files were pushed to this branch.$NC" ;            exit 0;          else             echo  -e "$GREEN Whitelist is already up to date. Please delete the version number in file dymola-ci-tests/ci_whitelist/ci_check_whitelist.txt, if you want to recreate the whitelist.$NC" ;            exit 0 ;          fi    artifacts:        paths:            - whitelist/$CI_PROJECT_NAME/dymola-ci-tests/ci_whitelist/ci_check_whitelist.txt            - whitelist/$CI_PROJECT_NAME/BESMod/BESMod-errorlog.txt        expire_in: 7h    only:        variables:            - $CI_COMMIT_MESSAGE =~ /ci_create_model_wh/    except:        refs:            - external_pull_requests