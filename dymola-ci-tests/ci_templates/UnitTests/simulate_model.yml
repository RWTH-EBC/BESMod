include: 'dymola-ci-tests/ci_templates/utilities.yml'stages:    - simulate    - create_example_whitelist.CI_simulate_model_job:    stage: simulate    before_script:        - !reference [.clone_ci_templates, script]        - !reference [.custom_install_additional_modelica_libraries, script]    script:        -  xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py  --single-package $lib_package --library BESMod -DS 2022   --simulate-examples    artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7h    only:        variables:            - $CI_COMMIT_MESSAGE =~ /ci_simulate/    except:        refs:            - external_pull_requests    retry:        max: 2        when: runner_system_failure          CI_simulate_BESMod_Examples:    variables:        lib_package: Examples    extends: .CI_simulate_model_jobCI_simulate_BESMod_Systems:    variables:        lib_package: Systems    extends: .CI_simulate_model_jobCI_simulate_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .CI_simulate_model_jobCI_simulate_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .CI_simulate_model_job    .dev_simulate_model_job:    stage: simulate    before_script:        - !reference [.clone_ci_templates, script]        - !reference [.custom_install_additional_modelica_libraries, script]    script:        -  xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py --single-package $lib_package --library BESMod -DS 2022   --simulate-examples    artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7 day    only:        refs:            - main    except:        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_show_ref/            - $CI_COMMIT_MESSAGE  =~ /ci_create_model_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_html_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_example_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_simulate/            - $CI_COMMIT_MESSAGE  =~ /ci_check/            - $CI_COMMIT_MESSAGE  =~ /ci_regression_test/            - $CI_COMMIT_MESSAGE  =~ /ci_html/            - $CI_COMMIT_MESSAGE  =~ /ci_setting/            - $CI_COMMIT_MESSAGE  =~ /ci_style_check/            - $CI_COMMIT_MESSAGE  =~ /ci_trigger_ibpsa/            - $CI_COMMIT_MESSAGE  =~ /ci_merge_except/            - $CI_COMMIT_MESSAGE  =~ /ci_correct_html/            - $CI_COMMIT_MESSAGE  =~ /ci_build_structure/            - $CI_COMMIT_MESSAGE  =~ /ci_build_whitelist/    retry:        max: 2        when: runner_system_failureDevelopment_simulate_BESMod_Examples:    variables:        lib_package: Examples    extends: .dev_simulate_model_jobDevelopment_simulate_BESMod_Systems:    variables:        lib_package: Systems    extends: .dev_simulate_model_jobDevelopment_simulate_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .dev_simulate_model_jobDevelopment_simulate_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .dev_simulate_model_job.simulate_model_job:    stage: simulate    before_script:        - !reference [.clone_ci_templates, script]        - !reference [.custom_install_additional_modelica_libraries, script]    script:        -  xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py  --single-package $lib_package --library BESMod -DS 2022   --simulate-examples    artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7 day     only:        refs:            - external_pull_requests    except:        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_show_ref/            - $CI_COMMIT_MESSAGE  =~ /ci_create_model_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_html_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_example_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_simulate/            - $CI_COMMIT_MESSAGE  =~ /ci_check/            - $CI_COMMIT_MESSAGE  =~ /ci_regression_test/            - $CI_COMMIT_MESSAGE  =~ /ci_html/            - $CI_COMMIT_MESSAGE  =~ /ci_setting/            - $CI_COMMIT_MESSAGE  =~ /ci_style_check/            - $CI_COMMIT_MESSAGE  =~ /ci_trigger_ibpsa/            - $CI_COMMIT_MESSAGE  =~ /ci_merge_except/            - $CI_COMMIT_MESSAGE  =~ /ci_correct_html/            - $CI_COMMIT_MESSAGE  =~ /ci_build_structure/            - $CI_COMMIT_MESSAGE  =~ /ci_build_whitelist/        refs:            - main    retry:        max: 2        when: runner_system_failure          simulate_BESMod_Examples:    variables:        lib_package: Examples    extends: .simulate_model_jobsimulate_BESMod_Systems:    variables:        lib_package: Systems    extends: .simulate_model_jobsimulate_BESMod_Tutorial:    variables:        lib_package: Tutorial    extends: .simulate_model_jobsimulate_BESMod_Utilities:    variables:        lib_package: Utilities    extends: .simulate_model_job    .simulate_changed_models_job:    stage: simulate    before_script:        - !reference [.clone_ci_templates, script]        - !reference [.custom_install_additional_modelica_libraries, script]    script:        - python MoCITempGen/CITests/CI_Configuration/configuration.py --changed-model        - git diff --raw --diff-filter=AMT HEAD^1 >  dymola-ci-tests/Configfiles/ci_changed_model_list.txt        -  xvfb-run -n 77 python MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py --single-package $lib_package --library BESMod -DS 2022 -CM --simulate-examples    artifacts:        when: on_failure        paths:            - BESMod/BESMod.$lib_package-log.txt            - BESMod/BESMod.$lib_package-errorlog.txt        expire_in: 7 day    except:        refs:            - external_pull_requests                        - main            - /^correct_HTML_.*$/        variables:            - $CI_COMMIT_MESSAGE  =~ /ci_show_ref/            - $CI_COMMIT_MESSAGE  =~ /ci_create_model_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_html_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_create_example_wh/            - $CI_COMMIT_MESSAGE  =~ /ci_simulate/            - $CI_COMMIT_MESSAGE  =~ /ci_check/            - $CI_COMMIT_MESSAGE  =~ /ci_regression_test/            - $CI_COMMIT_MESSAGE  =~ /ci_html/            - $CI_COMMIT_MESSAGE  =~ /ci_setting/            - $CI_COMMIT_MESSAGE  =~ /ci_style_check/            - $CI_COMMIT_MESSAGE  =~ /ci_trigger_ibpsa/            - $CI_COMMIT_MESSAGE  =~ /ci_merge_except/            - $CI_COMMIT_MESSAGE  =~ /ci_correct_html/            - $CI_COMMIT_MESSAGE  =~ /ci_build_structure/            - $CI_COMMIT_MESSAGE  =~ /ci_build_whitelist/    retry:        max: 2        when: runner_system_failuresimulate_BESMod_Examples_changed_models:    variables:        lib_package: Examples    only:        changes:            - BESMod/Examples/**/*      extends: .simulate_changed_models_jobsimulate_BESMod_Systems_changed_models:    variables:        lib_package: Systems    only:        changes:            - BESMod/Systems/**/*      extends: .simulate_changed_models_jobsimulate_BESMod_Tutorial_changed_models:    variables:        lib_package: Tutorial    only:        changes:            - BESMod/Tutorial/**/*      extends: .simulate_changed_models_jobsimulate_BESMod_Utilities_changed_models:    variables:        lib_package: Utilities    only:        changes:            - BESMod/Utilities/**/*      extends: .simulate_changed_models_jobwhitelist_example_job:    stage: create_example_whitelist    before_script:        - !reference [.clone_ci_templates, script]        - !reference [.custom_install_additional_modelica_libraries, script]        - !reference [.github_ssh_auth, script]    script:        - mkdir whitelist && cd whitelist        - git clone --single-branch --branch $CI_COMMIT_REF_NAME git@github.com:$Github_Repository.git        - cd $CI_PROJECT_NAME        - xvfb-run -n 77 python ../MoCITempGen/CITests/UnitTests/CheckPackages/validatetest.py -DS 2022 --repo-dir None   --library BESMod --wh-library None --whitelist --simulate-examples    after_script:        - cd whitelist && cd $CI_PROJECT_NAME        - if cat dymola-ci-tests/Configfiles/exit.sh | grep "FAIL"; then            message="CI message from ebc-aixlib-bot. Update file dymola-ci-tests\ci_whitelist\ci_simulate_whitelist.txt. Please pull the new files before push again." ;            git add dymola-ci-tests/ci_whitelist/ci_simulate_whitelist.txt ;            git commit -m "$message" ;            git push git@github.com:$Github_Repository.git ;            GREEN='\033[0;32m' ;            NC='\033[0m' ;            echo  -e "$GREEN New html whitelist files were pushed to this branch.$NC" ;            exit 0;          else            echo  -e "$GREEN Whitelist is already up to date. Please delete the version number in file dymola-ci-tests/ci_whitelist/ci_simulate_whitelist.txt, if you want to recreate the whitelist.$NC" ;            exit 0 ;          fi    artifacts:        paths:            - whitelist/$CI_PROJECT_NAME/dymola-ci-tests/ci_whitelist/ci_simulate_whitelist.txt            - whitelist/$CI_PROJECT_NAME/None/None-errorlog.txt        expire_in: 7h    only:        variables:            - $CI_COMMIT_MESSAGE =~ /ci_create_example_wh/    except:        refs:            - external_pull_requests